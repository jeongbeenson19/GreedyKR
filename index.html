<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Liar Game (Static JSON)</title>
  <style>
    body { font-family: system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif; margin: 24px; }
    .card { max-width: 520px; padding: 16px; border: 1px solid #ddd; border-radius: 12px; }
    label { display:block; margin-top: 12px; font-size: 14px; color:#333; }
    input { width: 100%; box-sizing: border-box; padding: 10px; border: 1px solid #bbb; border-radius: 10px; margin-top: 6px; }
    button { margin-top: 14px; padding: 10px 14px; border: none; border-radius: 10px; cursor: pointer; }
    #result { margin-top: 16px; padding: 14px; border-radius: 12px; border: 1px solid #ddd; min-height: 52px; display:flex; align-items:center; }
    .err { color:#b00020; }
    .ok { font-size: 22px; font-weight: 700; letter-spacing: 0.5px; }
    .hint { margin-top: 10px; font-size: 12px; color:#666; }
  </style>
</head>
<body>
  <div class="card">
    <h2 style="margin:0 0 8px 0;">Liar Game (정적 JSON)</h2>
    <div class="hint">게임번호 + 이름을 입력하면 words.json에서 찾아서 단어를 보여줍니다.</div>

    <label for="gameId">게임 번호</label>
    <input id="gameId" placeholder="예: 1001" autocomplete="off" inputmode="numeric" />

    <label for="name">이름</label>
    <input id="name" placeholder="예: 철수" autocomplete="off" />

    <button id="btn">단어 보기</button>

    <div id="result"></div>

    <div class="hint">
      ⚠️ 이 방식은 개발자도구로 words.json을 열면 전체 단어가 노출됩니다.
    </div>
  </div>

  <script>
    const $gameId = document.getElementById('gameId');
    const $name = document.getElementById('name');
    const $btn = document.getElementById('btn');
    const $result = document.getElementById('result');

    function setResult(text, ok) {
      $result.className = ok ? "ok" : "err";
      $result.textContent = text;
    }

    // 정적 JSON 로드(캐시 방지용 쿼리)
    async function loadDict() {
      const res = await fetch(`./words.json?ts=${Date.now()}`);
      if (!res.ok) throw new Error("words.json 로드 실패");
      return res.json();
    }

    async function handle() {
      const gameId = $gameId.value.trim();
      const name = $name.value.trim();

      if (!gameId || !name) {
        setResult("게임 번호와 이름을 모두 입력하세요.", false);
        return;
      }

      try {
        const dict = await loadDict();

        if (!dict[gameId]) {
          setResult(`해당 게임 번호(${gameId})가 없습니다.`, false);
          return;
        }
        if (!dict[gameId][name]) {
          setResult(`해당 이름(${name})이 게임(${gameId})에 없습니다.`, false);
          return;
        }

        const word = dict[gameId][name];
        setResult(word, true);
      } catch (e) {
        setResult(`오류: ${e.message}`, false);
      }
    }

    $btn.addEventListener('click', handle);
    $name.addEventListener('keydown', (e) => {
      if (e.key === "Enter") handle();
    });
    $gameId.addEventListener('keydown', (e) => {
      if (e.key === "Enter") handle();
    });
  </script>
</body>
</html>